{
	"variables": [],
	"info": {
		"name": "Request Style Collection",
		"_postman_id": "8b74a268-efb5-1e67-3a4e-be11c2de4390",
		"description": "",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "Create Customer",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"postman.setEnvironmentVariable(\"serviceUrl\", \"http://localhost:4567/api/v1\");",
							"postman.setEnvironmentVariable(\"customerId\", \"-1926853767843327050\");",
							"",
							"tests[\"Customer created\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"url": "http://localhost:4567/api/v1/customer/create/customer",
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"description": ""
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"permanentId\" : -4528939108101019240,\n  \"version\" : 1,\n  \"createdDate\" : \"2017-02-06T21:56:24.274Z\",\n  \"lastUpdated\" : \"2017-02-06T21:56:24.274Z\",\n  \"firstName\" : \"Customer first Name\",\n  \"lastName\" : \"lastname\",\n  \"email\" : \"customer@email.com\",\n  \"phone\" : \"+4453635436237\",\n  \"device\" : {\n    \"permanentId\" : -2907136812157778054,\n    \"version\" : 1,\n    \"createdDate\" : \"2017-02-06T21:56:24.274Z\",\n    \"id\" : -5159650623228815323,\n    \"deviceId\" : \"br3q06dk5tcfs0202l3k2a15tg\",\n    \"os\" : \"ios9\",\n    \"deviceType\" : \"IOS\"\n  },\n  \"photoUrl\" : \"http://some.photo.url\",\n  \"gender\" : \"M\",\n  \"active\" : true,\n  \"address\" : {\n    \"permanentId\" : 8386694704757603465,\n    \"version\" : 1,\n    \"createdDate\" : \"2017-02-27T03:00:00.436Z\",\n    \"id\" : 7083066285675174389,\n    \"addressLine\" : \"flat x\",\n    \"postCode\" : \"SE5 tgg\",\n    \"location\" : {\n      \"permanentId\" : 2138116990435268255,\n      \"version\" : 1,\n      \"createdDate\" : \"2017-02-27T03:00:00.436Z\",\n      \"id\" : 2138116990435268255,\n      \"city\" : \"London\",\n      \"state\" : \"Alabama\",\n      \"countryCode\" : \"UK\",\n      \"geoPoint\" : {\n        \"id\" : 8868894011258282251,\n        \"latitude\" : 51.503407,\n        \"longitude\" : -0.127592\n      }\n    }\n  },\n  \"id\" : -1926853767843327050,\n  \"ratings\" : {\n    \"0\" : 0,\n    \"1\" : 0,\n    \"2\" : 0,\n    \"3\" : 0,\n    \"4\" : 3,\n    \"5\" : 2\n  },\n  \"score\" : 4.5,\n  \"preferences\" : {\n    \"placedNotificationEnabled\" : true,\n    \"acceptedNotificationEnabled\" : true,\n    \"cancelledNotificationEnabled\" : true,\n    \"completedNotificationEnabled\" : true,\n    \"preferredPaymentType\" : \"PAYPAL\"\n  }\n}"
				},
				"description": "Create new customer"
			},
			"response": []
		},
		{
			"name": "Get created customer",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Customer is found\"] = responseCode.code === 200;",
							""
						]
					}
				}
			],
			"request": {
				"url": "{{serviceUrl}}/customer/info/?id={{customerId}}",
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"description": "Find newly created customer"
			},
			"response": []
		},
		{
			"name": "Create new merchant",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Merchant created\"] = responseCode.code === 200;",
							"",
							"postman.setEnvironmentVariable(\"merchantId\", \"6621510167243271896\");"
						]
					}
				}
			],
			"request": {
				"url": "{{serviceUrl}}/merchant/create/merchant",
				"method": "POST",
				"header": [
					{
						"key": "gtoken",
						"value": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjBoQU13ZyJ9.eyJpc3MiOiJodHRwczovL2lkZW50aXR5dG9vbGtpdC5nb29nbGUuY29tLyIsImF1ZCI6ImFteXJyaC10ZXN0MSIsImlhdCI6MTQ2Njk1OTc0OCwiZXhwIjoxNDY4MTY5MzQ4LCJ1c2VyX2lkIjoiZDVuYk85YmZVdGhkUHVCMEtVbTBDUFd6T0xwMiIsImVtYWlsIjoiY2lvQGFteXJyaC5jb20iLCJwcm92aWRlcl9pZCI6Imdvb2dsZS5jb20iLCJ2ZXJpZmllZCI6dHJ1ZX0.CkrrMZ-VBRJ6HYXevwGYisr7p_8afYMVRs2vAc9thFz5Eb6jUxTwGARGjroaGDAluM7LmfCDwJ1VeTCVWFB07HT_eVCiOci-9-Yk2x9dnotqGXrUNko3oNTGBE89SsEl_BFiKdyZZVhxbm14pMfhPCVZmxs5cxBEOfZ80HdKgc12zuMD_TUXQBY3746a9_Ca_DT20MkW9TAminmHxUQ8iXedPUyNQmNLBpbEy1ibJ0rOjoDfHym91sUfEu-YRXAxmGZKEUeOT9crbGmm7hrM7_UcUCISY68XXqg0HNpAJc2GI9p9mcQJP3wL6zNyOSmB9pJamt_SwzITP8gNqbaNSg",
						"description": ""
					},
					{
						"key": "Content-Type",
						"value": "application/json",
						"description": ""
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"permanentId\" : 6621510167243271896,\n  \"version\" : 1,\n  \"createdDate\" : \"2017-03-02T23:05:14.822Z\",\n  \"lastUpdated\" : \"2017-03-02T23:05:14.823Z\",\n  \"firstName\" : \"Test Merchant FirstName\",\n  \"lastName\" : \"lastname\",\n  \"email\" : \"merchant@email.com\",\n  \"phone\" : \"+1134555643654\",\n  \"device\" : {\n    \"permanentId\" : 5981815732749760502,\n    \"version\" : 1,\n    \"createdDate\" : \"2017-03-02T23:05:14.544Z\",\n    \"id\" : -9033332049852286847,\n    \"deviceId\" : \"l7dmjvt67oafc81rs48udsd5em\",\n    \"os\" : \"ios9\",\n    \"deviceType\" : \"IOS\"\n  },\n  \"styleRequestPayment\" : {\n    \"permanentId\" : 5447845332032134393,\n    \"version\" : 1,\n    \"createdDate\" : \"2017-03-02T23:05:14.825Z\",\n    \"id\" : 5447845332032134393,\n    \"amount\" : 3255.43,\n    \"customerId\" : 35345432,\n    \"merchantId\" : 3241342,\n    \"settled\" : true,\n    \"type\" : \"PAYPAL\"\n  },\n  \"photoUrl\" : \"http://some.photo.url\",\n  \"gender\" : \"F\",\n  \"active\" : true,\n  \"address\" : {\n    \"permanentId\" : 6417910370860107413,\n    \"version\" : 1,\n    \"createdDate\" : \"2017-03-02T23:05:14.822Z\",\n    \"id\" : -2007306903756970418,\n    \"addressLine\" : \"flat x\",\n    \"postCode\" : \"SE5 tgg\",\n    \"location\" : {\n      \"permanentId\" : 3063022651781677231,\n      \"version\" : 1,\n      \"createdDate\" : \"2017-03-02T23:05:14.822Z\",\n      \"id\" : 3063022651781677231,\n      \"city\" : \"London\",\n      \"state\" : \"Alabama\",\n      \"countryCode\" : \"GB\",\n      \"geoPoint\" : {\n        \"id\" : 2446360220652607486,\n        \"latitude\" : 51.503407,\n        \"longitude\" : -0.127592\n      }\n    }\n  },\n  \"preferences\" : {\n    \"placedNotificationEnabled\" : true,\n    \"acceptedNotificationEnabled\" : true,\n    \"cancelledNotificationEnabled\" : true,\n    \"completedNotificationEnabled\" : true,\n    \"preferredPaymentType\" : \"PAYPAL\"\n  },\n  \"id\" : 6621510167243271896,\n  \"businessName\" : \"Midas Touch\",\n  \"ratings\" : {\n    \"0\" : 0,\n    \"1\" : 0,\n    \"2\" : 0,\n    \"3\" : 0,\n    \"4\" : 3,\n    \"5\" : 2\n  },\n  \"score\" : 4.5\n}"
				},
				"description": "Create new merchant"
			},
			"response": []
		},
		{
			"name": "Get created merchant",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Merchant is found\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"url": "{{serviceUrl}}/merchant/info/?id={{merchantId}}",
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"description": "Find newly created merchant"
			},
			"response": []
		},
		{
			"name": "Create new Style",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"postman.setEnvironmentVariable(\"serviceUrl\", \"http://localhost:4567/api/v1\");",
							"tests[\"Syle created\"] = responseCode.code === 200;",
							"",
							"var jsonData = JSON.parse(responseBody);",
							"postman.setEnvironmentVariable(\"styleId\", jsonData.id);"
						]
					}
				}
			],
			"request": {
				"url": "{{serviceUrl}}/merchant/create/style?styleName=didi&merchantId={{merchantId}}&duration=45",
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"description": ""
					}
				],
				"body": {
					"mode": "raw",
					"raw": "[{\n  \"permanentId\" : 3549878539167814701,\n  \"version\" : 1,\n  \"id\" : -5224463303045973708,\n  \"url\" : \"http//lsoigej4bl8li4mmg6va4ullras.com\",\n  \"owner\" : \"test owner name\",\n  \"views\" : 4,\n  \"durationEstimate\" : 5\n  \n},{\n  \"permanentId\" : 3549878539167814702,\n  \"version\" : 1,\n  \"id\" : -5224463303045973708,\n  \"url\" : \"http//lsoigej4bl8li4mmg6va4ullrab.com\",\n  \"owner\" : \"test owner name\",\n  \"views\" : 7,\n  \"durationEstimate\" : 50\n  \n},{\n  \"permanentId\" : 3549878539167814703,\n  \"version\" : 1,\n  \"id\" : -5224463303045973708,\n  \"url\" : \"http//lsoigej4bl8li4mmg6va4ullrag.com\",\n  \"owner\" : \"test owner name\",\n  \"views\" : 12,\n  \"durationEstimate\" : 8\n  \n},{\n  \"permanentId\" : 3549878539167814704,\n  \"version\" : 1,\n  \"id\" : -5224463303045973708,\n  \"url\" : \"http//lsoigej4bl8li4mmg6va4ullraw.com\",\n  \"owner\" : \"test owner name\",\n  \"views\" : 9,\n  \"durationEstimate\" : 45\n  \n},{\n  \"permanentId\" : 3549878539167814705,\n  \"version\" : 1,\n  \"id\" : -5224463303045973708,\n  \"url\" : \"http//lsoigej4bl8li4mmg6va4ullraf.com\",\n  \"owner\" : \"test owner name\",\n  \"views\" : 94,\n  \"durationEstimate\" : 38\n  \n}]"
				},
				"description": "Create new Style"
			},
			"response": []
		},
		{
			"name": "Get created style",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Style is found\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"url": "{{serviceUrl}}/style/info/?id={{styleId}}",
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"description": ""
			},
			"response": []
		},
		{
			"name": "Update style",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Syle updated response code\"] = responseCode.code === 200;",
							"",
							"var jsonData = JSON.parse(responseBody);",
							"tests[\"Syle updated - good\"] = jsonData.name === \"style updated after didi\";",
							"",
							"if(!tests[\"Syle updated - good\"]) {",
							" console.log(\"Failed response: \" + responseBody);",
							"}"
						]
					}
				}
			],
			"request": {
				"url": "{{serviceUrl}}/style/update",
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"description": ""
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"permanentId\" : -4424178728855319845,\n  \"version\" : 1,\n  \"createdDate\" : \"2016-08-29T20:22:44.557Z\",\n  \"id\" : {{styleId}},\n  \"name\" : \"style updated after didi\",\n  \"requestCount\" : 0,\n  \"trending\" : true,\n  \"active\" : true,\n  \"publisherId\" : -1733350221602184676,\n  \"location\" : {\n    \"permanentId\" : -4766811198420564245,\n    \"version\" : 1,\n    \"createdDate\" : \"2016-08-29T20:22:44.556Z\",\n    \"id\" : -5712228046471495956,\n    \"city\" : \"London\",\n    \"state\" : \"Alabama\",\n    \"country\" : \"UK\",\n    \"geoPoint\" : {\n      \"id\" : -2914024913972574844,\n      \"latitude\" : 51.503407,\n      \"longitude\" : -0.127592\n    }\n  },\n  \"styleImages\" : [ {\n    \"permanentId\" : 1627324436263907989,\n    \"version\" : 1,\n    \"createdDate\" : \"2016-08-29T20:22:44.556Z\",\n    \"id\" : 6055824299439456969,\n    \"url\" : \"http//187v58eaa902ostno5f9rm30l7.com\",\n    \"owner\" : \"test owner name\",\n    \"views\" : 20\n  } ],\n  \"durationEstimate\" : 5\n}"
				},
				"description": ""
			},
			"response": []
		},
		{
			"name": "update style bad",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Syle updated response code\"] = responseCode.code === 400;",
							"if(!tests[\"Syle updated response code\"]) {",
							" console.log(\"Failed response: \" + responseBody);",
							"}"
						]
					}
				}
			],
			"request": {
				"url": "{{serviceUrl}}/style/update",
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"description": ""
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"id\" : -12345\n}"
				},
				"description": ""
			},
			"response": []
		},
		{
			"name": "Place style request",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Style request placed\"] = responseCode.code === 200;",
							"",
							"var jsonData = JSON.parse(responseBody);"
						]
					}
				}
			],
			"request": {
				"url": "{{serviceUrl}}/customer/request/style?customerId={{customerId}}&styleId={{styleId}}&merchantId={{merchantId}}&dateTime=2017-06-20T09:00:01.635Z",
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"description": ""
					}
				],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"description": "Place new style request"
			},
			"response": []
		},
		{
			"name": "Update customer Payment info",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Payment updated\"] = responseCode.code === 200;",
							""
						]
					}
				}
			],
			"request": {
				"url": "http://localhost:4567/api/v1/customer/update/payment?customerId={{customerId}}",
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"description": ""
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"permanentId\" : 79612003400944687,\n  \"version\" : 1,\n  \"createdDate\" : \"2017-02-09T00:16:29.541Z\",\n  \"id\" : 79612003400944687,\n  \"amount\" : 2432.545,\n  \"customerId\" : 435432,\n  \"merchantId\" : 3254234,\n  \"settled\" : true,\n  \"type\" : \"PAYPAL\",\n  \"date\" : null\n}"
				},
				"description": ""
			},
			"response": []
		}
	]
}