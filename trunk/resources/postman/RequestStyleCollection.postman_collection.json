{
	"variables": [],
	"info": {
		"name": "Request Style Collection",
		"_postman_id": "8b74a268-efb5-1e67-3a4e-be11c2de4390",
		"description": "",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "Create Customer",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"postman.setEnvironmentVariable(\"serviceUrl\", \"http://localhost:4567/api/v1\");",
							"postman.setEnvironmentVariable(\"customerId\", \"-5064501332121306936\");",
							"",
							"tests[\"Customer created\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"url": "http://localhost:4567/api/v1/customer/create/customer",
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"description": ""
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"permanentId\" : -5064501332121306936,\n  \"version\" : 1,\n  \"createdDate\" : \"2017-02-09T00:13:22.121Z\",\n  \"lastUpdated\" : \"2017-02-09T00:13:22.121Z\",\n  \"firstName\" : \"Customer first Name\",\n  \"lastName\" : \"lastname\",\n  \"email\" : \"customer@email.com\",\n  \"phone\" : \"+4453635436237\",\n  \"device\" : {\n    \"permanentId\" : -9098851377016438314,\n    \"version\" : 1,\n    \"createdDate\" : \"2017-02-09T00:13:21.444Z\",\n    \"id\" : 4960725887859519817,\n    \"deviceId\" : \"dg8c23j98auiapi7ku1rk40hvs\",\n    \"os\" : \"ios9\",\n    \"deviceType\" : \"IOS\"\n  },\n  \"payment\" : {\n    \"permanentId\" : 7193035723143121497,\n    \"version\" : 1,\n    \"createdDate\" : \"2017-02-09T00:13:22.121Z\",\n    \"id\" : 7193035723143121497,\n    \"amount\" : 3255.43,\n    \"customerId\" : 35345432,\n    \"merchantId\" : 3241342,\n    \"settled\" : true,\n    \"type\" : \"PAYPAL\",\n    \"date\" : null\n  },\n  \"photoUrl\" : \"http://some.photo.url\",\n  \"gender\" : \"M\",\n  \"active\" : true,\n  \"id\" : -5064501332121306936,\n  \"location\" : {\n    \"permanentId\" : -5914955103473965187,\n    \"version\" : 1,\n    \"createdDate\" : \"2017-02-09T00:13:22.121Z\",\n    \"id\" : -5914955103473965187,\n    \"city\" : \"London\",\n    \"state\" : \"Alabama\",\n    \"country\" : \"UK\",\n    \"geoPoint\" : {\n      \"id\" : -2502791210581232404,\n      \"latitude\" : 51.503407,\n      \"longitude\" : -0.127592\n    }\n  },\n  \"ratings\" : {\n    \"0\" : 0,\n    \"1\" : 0,\n    \"2\" : 0,\n    \"3\" : 0,\n    \"4\" : 3,\n    \"5\" : 2\n  },\n  \"score\" : 4.5\n}"
				},
				"description": "Create new customer"
			},
			"response": []
		},
		{
			"name": "Get created customer",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Customer is found\"] = responseCode.code === 200;",
							""
						]
					}
				}
			],
			"request": {
				"url": "{{serviceUrl}}/customer/info/?id={{customerId}}",
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"description": "Find newly created customer"
			},
			"response": []
		},
		{
			"name": "Update Payment",
			"request": {
				"url": "http://localhost:4567/api/v1/customer/update/payment?customerId={{customerId}}",
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"description": ""
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"permanentId\" : 79612003400944687,\n  \"version\" : 1,\n  \"createdDate\" : \"2017-02-09T00:16:29.541Z\",\n  \"id\" : 79612003400944687,\n  \"amount\" : 2432.545,\n  \"customerId\" : 435432,\n  \"merchantId\" : 3254234,\n  \"settled\" : true,\n  \"type\" : \"PAYPAL\",\n  \"date\" : null\n}"
				},
				"description": ""
			},
			"response": []
		},
		{
			"name": "Create new merchant",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Merchant created\"] = responseCode.code === 200;",
							"",
							"postman.setEnvironmentVariable(\"merchantId\", \"-4689811460267167170\");"
						]
					}
				}
			],
			"request": {
				"url": "{{serviceUrl}}/merchant/create/merchant",
				"method": "POST",
				"header": [
					{
						"key": "gtoken",
						"value": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjBoQU13ZyJ9.eyJpc3MiOiJodHRwczovL2lkZW50aXR5dG9vbGtpdC5nb29nbGUuY29tLyIsImF1ZCI6ImFteXJyaC10ZXN0MSIsImlhdCI6MTQ2Njk1OTc0OCwiZXhwIjoxNDY4MTY5MzQ4LCJ1c2VyX2lkIjoiZDVuYk85YmZVdGhkUHVCMEtVbTBDUFd6T0xwMiIsImVtYWlsIjoiY2lvQGFteXJyaC5jb20iLCJwcm92aWRlcl9pZCI6Imdvb2dsZS5jb20iLCJ2ZXJpZmllZCI6dHJ1ZX0.CkrrMZ-VBRJ6HYXevwGYisr7p_8afYMVRs2vAc9thFz5Eb6jUxTwGARGjroaGDAluM7LmfCDwJ1VeTCVWFB07HT_eVCiOci-9-Yk2x9dnotqGXrUNko3oNTGBE89SsEl_BFiKdyZZVhxbm14pMfhPCVZmxs5cxBEOfZ80HdKgc12zuMD_TUXQBY3746a9_Ca_DT20MkW9TAminmHxUQ8iXedPUyNQmNLBpbEy1ibJ0rOjoDfHym91sUfEu-YRXAxmGZKEUeOT9crbGmm7hrM7_UcUCISY68XXqg0HNpAJc2GI9p9mcQJP3wL6zNyOSmB9pJamt_SwzITP8gNqbaNSg",
						"description": ""
					},
					{
						"key": "Content-Type",
						"value": "application/json",
						"description": ""
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"permanentId\" : -4689811460267167170,\n  \"version\" : 1,\n  \"createdDate\" : \"2017-02-06T07:54:39.548Z\",\n  \"lastUpdated\" : \"2017-02-06T07:54:39.548Z\",\n  \"name\" : \"Test Merchant Name\",\n  \"email\" : \"merchant@email.com\",\n  \"phone\" : \"+1134555643654\",\n  \"device\" : {\n    \"permanentId\" : -5804814280700189014,\n    \"version\" : 1,\n    \"createdDate\" : \"2017-02-06T07:54:39.410Z\",\n    \"id\" : 1191626847201020297,\n    \"deviceId\" : \"j9bf5g7mnbf56jbd4j2loi1rv3\",\n    \"os\" : \"ios9\",\n    \"deviceType\" : \"IOS\"\n  },\n  \"photoUrl\" : \"http://some.photo.url\",\n  \"gender\" : \"F\",\n  \"active\" : true,\n  \"id\" : -4689811460267167170,\n  \"location\" : {\n    \"permanentId\" : -4132900056413104581,\n    \"version\" : 1,\n    \"createdDate\" : \"2017-02-06T07:54:39.548Z\",\n    \"id\" : -4132900056413104581,\n    \"city\" : \"London\",\n    \"state\" : \"Alabama\",\n    \"country\" : \"UK\",\n    \"geoPoint\" : {\n      \"id\" : 2585139948139706069,\n      \"latitude\" : 51.503407,\n      \"longitude\" : -0.127592\n    }\n  },\n  \"ratings\" : {\n    \"0\" : 0,\n    \"1\" : 0,\n    \"2\" : 0,\n    \"3\" : 0,\n    \"4\" : 3,\n    \"5\" : 2\n  },\n  \"score\" : 4.5\n}"
				},
				"description": "Create new merchant"
			},
			"response": []
		},
		{
			"name": "Get created merchant",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Merchant is found\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"url": "{{serviceUrl}}/merchant/info/?id={{merchantId}}",
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"description": "Find newly created merchant"
			},
			"response": []
		},
		{
			"name": "Create new Style",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"postman.setEnvironmentVariable(\"serviceUrl\", \"http://localhost:4567/api/v1\");",
							"tests[\"Syle created\"] = responseCode.code === 200;",
							"",
							"var jsonData = JSON.parse(responseBody);",
							"postman.setEnvironmentVariable(\"styleId\", jsonData.id);"
						]
					}
				}
			],
			"request": {
				"url": "{{serviceUrl}}/merchant/create/style?styleName=didi&merchantId={{merchantId}}&duration=45",
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"description": ""
					}
				],
				"body": {
					"mode": "raw",
					"raw": "[{\n  \"permanentId\" : 3549878539167814701,\n  \"version\" : 1,\n  \"id\" : -5224463303045973708,\n  \"url\" : \"http//lsoigej4bl8li4mmg6va4ullra.com\",\n  \"owner\" : \"test owner name\",\n  \"views\" : 20,\n  \"durationEstimate\" : 5\n  \n}]"
				},
				"description": "Create new Style"
			},
			"response": []
		},
		{
			"name": "Get created style",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Style is found\"] = responseCode.code === 200;"
						]
					}
				}
			],
			"request": {
				"url": "{{serviceUrl}}/style/info/?id={{styleId}}",
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"description": ""
			},
			"response": []
		},
		{
			"name": "Update style",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Syle updated response code\"] = responseCode.code === 200;",
							"",
							"var jsonData = JSON.parse(responseBody);",
							"tests[\"Syle updated - good\"] = jsonData.name === \"style updated after didi\";"
						]
					}
				}
			],
			"request": {
				"url": "{{serviceUrl}}/style/update",
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"description": ""
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"permanentId\" : -4424178728855319845,\n  \"version\" : 1,\n  \"createdDate\" : \"2016-08-29T20:22:44.557Z\",\n  \"id\" : 4003,\n  \"name\" : \"style updated after didi\",\n  \"requestCount\" : 0,\n  \"trending\" : true,\n  \"active\" : true,\n  \"publisherId\" : -1733350221602184676,\n  \"location\" : {\n    \"permanentId\" : -4766811198420564245,\n    \"version\" : 1,\n    \"createdDate\" : \"2016-08-29T20:22:44.556Z\",\n    \"id\" : -5712228046471495956,\n    \"city\" : \"London\",\n    \"state\" : \"Alabama\",\n    \"country\" : \"UK\",\n    \"geoPoint\" : {\n      \"id\" : -2914024913972574844,\n      \"latitude\" : 51.503407,\n      \"longitude\" : -0.127592\n    }\n  },\n  \"styleImages\" : [ {\n    \"permanentId\" : 1627324436263907989,\n    \"version\" : 1,\n    \"createdDate\" : \"2016-08-29T20:22:44.556Z\",\n    \"id\" : 6055824299439456969,\n    \"url\" : \"http//187v58eaa902ostno5f9rm30l7.com\",\n    \"owner\" : \"test owner name\",\n    \"views\" : 20\n  } ],\n  \"durationEstimate\" : 5\n}"
				},
				"description": ""
			},
			"response": []
		},
		{
			"name": "update style bad",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Syle updated response code\"] = responseCode.code === 400;",
							"//tests[\"Error Body matches string\"] = responseBody.has(\"Could not find Style\");"
						]
					}
				}
			],
			"request": {
				"url": "{{serviceUrl}}/style/update",
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"description": ""
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"id\" : 12345\n}"
				},
				"description": ""
			},
			"response": []
		},
		{
			"name": "Place style request",
			"event": [
				{
					"listen": "test",
					"script": {
						"type": "text/javascript",
						"exec": [
							"tests[\"Style request placed\"] = responseCode.code === 200;",
							"",
							"var jsonData = JSON.parse(responseBody);"
						]
					}
				}
			],
			"request": {
				"url": "{{serviceUrl}}/customer/request/style?customerId={{customerId}}&styleId={{styleId}}&merchantId={{merchantId}}&dateTime=2016-08-29T20:17:00.653Z",
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"description": ""
					}
				],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"description": "Place new style request"
			},
			"response": []
		},
		{
			"name": "Update customer Payment",
			"request": {
				"url": "http://localhost:4567/api/v1/customer/update/payment?customerId={{customerId}}",
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"description": ""
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"permanentId\" : 79612003400944687,\n  \"version\" : 1,\n  \"createdDate\" : \"2017-02-09T00:16:29.541Z\",\n  \"id\" : 79612003400944687,\n  \"amount\" : 2432.545,\n  \"customerId\" : {{customerId}},\n  \"merchantId\" : {{merchantId}},\n  \"settled\" : true,\n  \"type\" : \"PAYPAL\"\n}"
				},
				"description": ""
			},
			"response": []
		}
	]
}